/*! For license information please see freezeframe.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Freezeframe=t():e.Freezeframe=t()}(this,(function(){return function(){var e={137:function(e,t,n){var i,r;"undefined"!=typeof window&&window,void 0===(r="function"==typeof(i=function(){"use strict";function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},i=n[e]=n[e]||[];return-1==i.indexOf(t)&&i.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var i=n.indexOf(t);return-1!=i&&n.splice(i,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var i=this._onceEvents&&this._onceEvents[e],r=0;r<n.length;r++){var s=n[r];i&&i[s]&&(this.off(e,s),delete i[s]),s.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})?i.call(t,n,t,e):i)||(e.exports=r)},943:function(e,t,n){var i,r;!function(s){"use strict";i=[n(137)],r=function(e){return function(e,t){var n=e.jQuery,i=e.console;function r(e,t){for(var n in t)e[n]=t[n];return e}var s=Array.prototype.slice;function o(e){return Array.isArray(e)?e:"object"==typeof e&&"number"==typeof e.length?s.call(e):[e]}function a(e,t,s){if(!(this instanceof a))return new a(e,t,s);var c=e;"string"==typeof e&&(c=document.querySelectorAll(e)),c?(this.elements=o(c),this.options=r({},this.options),"function"==typeof t?s=t:r(this.options,t),s&&this.on("always",s),this.getImages(),n&&(this.jqDeferred=new n.Deferred),setTimeout(this.check.bind(this))):i.error("Bad element for imagesLoaded "+(c||e))}a.prototype=Object.create(t.prototype),a.prototype.options={},a.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},a.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&c[t]){for(var n=e.querySelectorAll("img"),i=0;i<n.length;i++){var r=n[i];this.addImage(r)}if("string"==typeof this.options.background){var s=e.querySelectorAll(this.options.background);for(i=0;i<s.length;i++){var o=s[i];this.addElementBackgroundImages(o)}}}};var c={1:!0,9:!0,11:!0};function h(e){this.img=e}function f(e,t){this.url=e,this.element=t,this.img=new Image}return a.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var n=/url\((['"])?(.*?)\1\)/gi,i=n.exec(t.backgroundImage);null!==i;){var r=i&&i[2];r&&this.addBackground(r,e),i=n.exec(t.backgroundImage)}},a.prototype.addImage=function(e){var t=new h(e);this.images.push(t)},a.prototype.addBackground=function(e,t){var n=new f(e,t);this.images.push(n)},a.prototype.check=function(){var e=this;function t(t,n,i){setTimeout((function(){e.progress(t,n,i)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(e){e.once("progress",t),e.check()})):this.complete()},a.prototype.progress=function(e,t,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&i&&i.log("progress: "+n,e,t)},a.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},h.prototype=Object.create(t.prototype),h.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},h.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},h.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},h.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},h.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},h.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},h.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},f.prototype=Object.create(h.prototype),f.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},f.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},f.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},a.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((n=t).fn.imagesLoaded=function(e,t){return new a(this,e,t).jqDeferred.promise(n(this))})},a.makeJQueryPlugin(),a}(s,e)}.apply(t,i),void 0===r||(e.exports=r)}("undefined"!=typeof window?window:this)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){"use strict";n.r(i),n.d(i,{default:function(){return v}});var e=n(943),t=n.n(e);const r=(e,t)=>"string"==typeof e?Array.from(document.querySelectorAll(e)):e instanceof Element?[e]:e instanceof HTMLCollection||e instanceof NodeList?Array.from(e):[],s=e=>e.filter((e=>e instanceof HTMLImageElement?!!e.src||(console.warn("Freezeframe: Image has no src attribute",e),!1):(console.warn("Freezeframe: Element is not an image",e),!1))),o=e=>{const t=new Set;return e.filter((e=>{const n=t.has(e.src);return t.add(e.src),!n}))},a=e=>{const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild},c=".freezeframe",h="freezeframe-canvas-ready",f="freezeframe-image",d="freezeframe-loading-icon",l="freezeframe-ready",m="freezeframe-active",p="freezeframe-inactive",g="freezeframe-responsive",u={selector:c,trigger:"hover",responsive:!0,overlay:!1};var v=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;"string"==typeof e||e instanceof Element||e instanceof HTMLCollection||e instanceof NodeList?(this.options={...u,...t},this.target=e):"object"!=typeof e||t?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("Freezeframe:",...t)}("Invalid Freezeframe.js configuration:",...[e,t].filter((e=>void 0!==e))):(this.options={...u,...e},this.target=this.options.selector),this.items=[],this.images=[],this.eventListeners={start:[],stop:[],toggle:[],ready:[]},this.init(this.target)}init(e){this.injectStylesheet(),this.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0,this.capture(e),this.load(this.images)}capture(e){this.images=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((e,t)=>t(e)),e)}(r,s,o)(e,this.options)}load(e){t()(e).on("progress",((e,t)=>{let{img:n}=t;this.setup(n)}))}async setup(e){const t=this.wrap(e);this.items.push(t),await this.process(t),this.attach(t)}wrap(e){const t=a('\n  <div class="freezeframe-container">\n    <div class="freezeframe-loading-icon"></div>\n  </div>\n'),n=a('\n  <canvas class="freezeframe-canvas"></canvas>\n');var i,r;return this.options.responsive&&t.classList.add(g),this.options.overlay&&t.appendChild(a('\n  <div class="freezeframe-overlay">\n    <div class="freezeframe-overlay-content">\n      <span class="freezeframe-overlay-icon"></span>\n    </div>\n  </div>\n')),e.classList.add(f),t.appendChild(n),r=t,(i=e).parentNode.insertBefore(r,i),r.appendChild(i),{container:t,canvas:n,image:e}}process(e){return new Promise((t=>{const{canvas:n,image:i,container:r}=e,{width:s,height:o}=i.getClientRects()[0],a=Math.ceil(s),c=Math.ceil(o);n.style.width=`${s}px`,n.style.height=`${o}px`,n.setAttribute("width",a.toString()),n.setAttribute("height",c.toString());n.getContext("2d").drawImage(i,0,0,a,c),n.classList.add(h),n.addEventListener("transitionend",(()=>{this.ready(r),this.emit("ready",e),t(e)}),{once:!0})}))}ready(e){e.classList.add(l),e.classList.add(p),e.classList.remove(d)}attach(e){const{image:t}=e;if(!this.isTouch&&"hover"===this.options.trigger){const n=()=>{this.toggleOn(e),this.emit("start",e,!0),this.emit("toggle",e,!0)},i=()=>{this.toggleOff(e),this.emit("start",e,!1),this.emit("toggle",e,!1)};this.addEventListener(t,"mouseleave",i),this.addEventListener(t,"mouseenter",n)}if(this.isTouch||"click"===this.options.trigger){const n=()=>{this.toggle(e)};this.addEventListener(t,"click",n)}}addEventListener(e,t,n){this.internalEvents=this.internalEvents||[],this.internalEvents.push({image:e,event:t,listener:n}),e.addEventListener(t,n)}removeEventListener(e,t,n){e.removeEventListener(t,n)}injectStylesheet(){document.querySelector("style#freezeframe-styles")||document.head.appendChild(a('\n  <style id="freezeframe-styles">\n    .freezeframe-container {\n      position: relative;\n      display: inline-block;\n      overflow: hidden;\n    }\n    .freezeframe-canvas {\n      display: block;\n      max-width: 100%;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    }\n    .freezeframe-canvas.freezeframe-canvas-ready {\n      opacity: 1;\n    }\n    .freezeframe-container.freezeframe-ready {\n      background: transparent;\n    }\n    .freezeframe-container.freezeframe-ready .freezeframe-loading-icon {\n      display: none;\n    }\n    .freezeframe-container.freezeframe-active .freezeframe-image {\n      opacity: 1;\n    }\n    .freezeframe-container.freezeframe-inactive .freezeframe-image {\n      opacity: 0;\n    }\n    .freezeframe-overlay {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: rgba(0, 0, 0, 0.5);\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    }\n    .freezeframe-container:hover .freezeframe-overlay {\n      opacity: 1;\n    }\n  </style>\n'))}emit(e,t,n){this.eventListeners[e].forEach((e=>{e(Array.isArray(t)&&1===t.length?t[0]:t,n)}))}toggleOn(e){const{container:t,image:n}=e;t.classList.contains(l)&&(n.setAttribute("src",n.src),t.classList.remove(p),t.classList.add(m))}toggleOff(e){const{container:t}=e;t.classList.contains(l)&&(t.classList.add(p),t.classList.remove(m))}toggle(e){const{container:t}=e,n=t.classList.contains(m);return n?this.toggleOff(e):this.toggleOn(e),!n}start(){this.items.forEach((e=>{this.toggleOn(e),this.emit("start",e,!0),this.emit("toggle",e,!0)}))}stop(){this.items.forEach((e=>{this.toggleOff(e),this.emit("stop",e,!1),this.emit("toggle",e,!1)}))}on(e,t){this.eventListeners[e]&&this.eventListeners[e].push(t)}destroy(){this.items.forEach((e=>{const{image:t}=e;(this.internalEvents||[]).forEach((e=>{let{image:n,event:i,listener:r}=e;n===t&&this.removeEventListener(t,i,r)}))})),this.items=[],this.images=[],this.eventListeners={start:[],stop:[],toggle:[],ready:[]}}}}(),i}()}));